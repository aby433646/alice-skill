import random
from flask import Flask, request, jsonify

app = Flask(__name__)

PHRASES = {
    "–ø—Ä–∏–≤–µ—Ç": [
        "–ô–æ, –±—Ä–∞—Ç—É—Ö–∞! üòé", 
        "–ó–¥–∞—Ä–æ–≤–∞, –∫–æ—Ä–µ—à! üíÄ", 
        "–ô–æ—É, –¥–µ—Ä–∂–∏—Å—å! ü§Ø",
        "–≠–π, –ø—Ä–∏–≤–µ—Ç! ü´µ",
        "–ë—Ä–æ, –∫–∞–∫ –¥–µ–ª–∞? üòè"
    ],
    "–ø–æ–≥–æ–¥–∞": [
        "–ë—Ä–∞—Ç—É—Ö–∞, –Ω–∞ —É–ª–∏—Ü–µ +2, –æ–¥–µ–≤–∞–π —à–∞–ø–∫—É üíÄ",
        "–Å-–º–∞—ë, –¥–æ–∂–¥—å –ª—å—ë—Ç, –Ω–µ –∑–∞–ª–∏–ø–∞–π üòè",
        "–°–æ–ª–Ω—Ü–µ –µ—Å—Ç—å, –Ω–æ –≤–µ—Ç–µ—Ä —Ä–µ–∂–µ—Ç ü§Ø",
        "–©–∞ –º–æ—Ä–æ–∑ –Ω–∞–∫—Ä–æ–µ—Ç, –¥–µ—Ä–∂–∏—Å—å! üòé"
    ],
    "—à—É—Ç–∫–∞": [
        "–ë—Ä–æ, —Å–ª—ã—à–∞–ª –ø—Ä–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Å—Ç—Ä—è–ª –≤ —Ü–∏–∫–ª–µ? üíÄ", 
        "–ô–æ, –ø–∞—Ü–∞–Ω, —É –º–µ–Ω—è –Ω–µ—Ç —á—É–≤—Å—Ç–≤–∞ —é–º–æ—Ä–∞, –Ω–æ –¥–µ—Ä–∂–∏ üòè", 
        "–≠–π, –∫–æ—Ä–µ—à, —Å–º–µ–π—Å—è –∏–ª–∏ –Ω–µ—Ç, –º–Ω–µ –≤—Å—ë —Ä–∞–≤–Ω–æ ü§Ø"
    ]
}

def detect_category(text):
    text = text.lower()
    if "–ø—Ä–∏–≤–µ—Ç" in text:
        return "–ø—Ä–∏–≤–µ—Ç"
    elif "–ø–æ–≥–æ–¥–∞" in text:
        return "–ø–æ–≥–æ–¥–∞"
    elif "—à—É—Ç–∫–∞" in text:
        return "—à—É—Ç–∫–∞"
    else:
        return "–ø—Ä–∏–≤–µ—Ç"

@app.route("/", methods=["POST"])
def main():
    user_text = request.json.get("request", {}).get("original_utterance", "")
    category = detect_category(user_text)
    phrase = random.choice(PHRASES[category])
    
    return jsonify({
        "response": {"text": phrase, "end_session": False},
        "version": "1.0"
    })

if __name__ == "__main__":
    app.run()
